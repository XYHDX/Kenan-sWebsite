(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6543],{1641:(e,t,a)=>{Promise.resolve().then(a.bind(a,1497))},4091:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var s=a(3200),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=(e,t)=>{let a=(0,s.forwardRef)((a,l)=>{let{color:c="currentColor",size:d=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:m="",children:h,...x}=a;return(0,s.createElement)("svg",{ref:l,...r,width:d,height:d,stroke:c,strokeWidth:o?24*Number(n)/Number(d):n,className:["lucide","lucide-".concat(i(e)),m].join(" "),...x},[...t.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...Array.isArray(h)?h:[h]])});return a.displayName="".concat(e),a}},4966:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(4091).A)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]])},6665:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(4091).A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},6372:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(4091).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},5882:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(4091).A)("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]])},4140:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(4091).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},1497:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>x});var s=a(2860),r=a(3200),i=a(3963);a(4966);var l=a(4091);(0,l.A)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);let c=(0,l.A)("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);var d=a(6372);let n=(0,l.A)("MailOpen",[["path",{d:"M21.2 8.4c.5.38.8.97.8 1.6v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V10a2 2 0 0 1 .8-1.6l8-6a2 2 0 0 1 2.4 0l8 6Z",key:"1jhwl8"}],["path",{d:"m22 10-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 10",key:"1qfld7"}]]);var o=a(4140),m=a(4768),h=a(6665);let x=()=>{let[e,t]=(0,r.useState)([]),[a,l]=(0,r.useState)(!0),[x,y]=(0,r.useState)(null),[g,u]=(0,r.useState)(""),[b,p]=(0,r.useState)("date"),[j,v]=(0,r.useState)("desc"),[N,f]=(0,r.useState)("all"),k=async()=>{l(!0),u("");try{let e=await fetch("/api/admin/messages");if(!e.ok)throw Error("Failed to fetch messages: ".concat(e.statusText));let a=await e.json();t(a)}catch(e){console.error("Error fetching messages:",e),u("Failed to load messages. Please try again.")}finally{l(!1)}};(0,r.useEffect)(()=>{k()},[]);let w=async a=>{try{let s=e.find(e=>e.id===a);if(!s)return;!s.read&&(await fetch("/api/admin/messages",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:a,read:!0})})).ok&&t(e=>e.map(e=>e.id===a?{...e,read:!0}:e))}catch(e){console.error("Error marking message as read:",e)}},A=async e=>{if(window.confirm("Are you sure you want to delete this message?"))try{(await fetch("/api/admin/messages",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})})).ok&&(t(t=>t.filter(t=>t.id!==e)),x&&x.id===e&&y(null))}catch(e){console.error("Error deleting message:",e)}},C=[...e.filter(e=>"unread"===N?!e.read:"read"!==N||e.read)].sort((e,t)=>{if("date"===b)return"asc"===j?new Date(e.date).getTime()-new Date(t.date).getTime():new Date(t.date).getTime()-new Date(e.date).getTime();let a=e[b].toLowerCase(),s=t[b].toLowerCase();return a<s?"asc"===j?-1:1:a>s?"asc"===j?1:-1:0}),M=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return(0,r.useEffect)(()=>{},[]),(0,s.jsxs)(i.A,{activePage:"messages",children:[(0,s.jsx)("div",{className:"mb-6 flex justify-between items-center",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Messages"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Manage contact form submissions"})]})}),(0,s.jsxs)("div",{className:"mb-6 flex space-x-4",children:[(0,s.jsxs)("button",{onClick:()=>f("all"),className:"px-4 py-2 rounded-md ".concat("all"===N?"bg-blue-600 text-white":"bg-gray-100 text-gray-800 hover:bg-gray-200"),children:[(0,s.jsx)(c,{size:16,className:"inline-block mr-2"})," All"]}),(0,s.jsxs)("button",{onClick:()=>f("unread"),className:"px-4 py-2 rounded-md ".concat("unread"===N?"bg-blue-600 text-white":"bg-gray-100 text-gray-800 hover:bg-gray-200"),children:[(0,s.jsx)(d.A,{size:16,className:"inline-block mr-2"})," Unread"]}),(0,s.jsxs)("button",{onClick:()=>f("read"),className:"px-4 py-2 rounded-md ".concat("read"===N?"bg-blue-600 text-white":"bg-gray-100 text-gray-800 hover:bg-gray-200"),children:[(0,s.jsx)(n,{size:16,className:"inline-block mr-2"})," Read"]})]}),g&&(0,s.jsx)("div",{className:"p-4 mb-6 bg-red-50 text-red-700 rounded-md",children:g}),a?(0,s.jsx)("div",{className:"text-center py-8",children:"Loading messages..."}):0===C.length?(0,s.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No messages found. When visitors submit contact forms, they will appear here."}):(0,s.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"md:col-span-1 bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[(0,s.jsx)("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:(0,s.jsx)("h2",{className:"font-medium text-gray-800",children:"Inbox"})}),(0,s.jsx)("div",{className:"overflow-y-auto max-h-[600px]",children:(0,s.jsx)("div",{className:"divide-y divide-gray-200",children:C.map(e=>(0,s.jsxs)("div",{className:"p-4 cursor-pointer hover:bg-gray-50 ".concat((null==x?void 0:x.id)===e.id?"bg-blue-50":""," ").concat(e.read?"":"font-semibold"),onClick:()=>{y(e),w(e.id)},children:[(0,s.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,s.jsxs)("span",{className:"text-sm text-gray-900 truncate",children:[e.read?(0,s.jsx)(n,{size:14,className:"inline-block mr-2 text-gray-400"}):(0,s.jsx)(d.A,{size:14,className:"inline-block mr-2 text-blue-500"}),e.name]}),(0,s.jsx)("button",{onClick:t=>{t.stopPropagation(),A(e.id)},className:"text-gray-400 hover:text-red-500",children:(0,s.jsx)(o.A,{size:14})})]}),(0,s.jsx)("div",{className:"text-xs text-gray-500 mb-1 truncate",children:(0,s.jsx)("span",{className:"text-gray-700",children:e.subject||"(No subject)"})}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:M(e.date)})]},e.id))})})]}),(0,s.jsx)("div",{className:"md:col-span-2 bg-white rounded-lg shadow-sm border border-gray-200",children:x?(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"mb-6 border-b border-gray-200 pb-4",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold mb-2",children:x.subject||"(No subject)"}),(0,s.jsxs)("div",{className:"flex items-center text-sm text-gray-500 mb-2",children:[(0,s.jsx)(m.A,{size:14,className:"mr-1"}),(0,s.jsx)("span",{className:"mr-4",children:x.name}),(0,s.jsx)(h.A,{size:14,className:"mr-1"}),(0,s.jsx)("span",{children:M(x.date)})]}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:[(0,s.jsx)(d.A,{size:14,className:"inline-block mr-1"}),(0,s.jsx)("a",{href:"mailto:".concat(x.email),className:"text-blue-600 hover:underline",children:x.email})]})]}),(0,s.jsx)("div",{className:"whitespace-pre-wrap text-gray-700",children:x.message}),(0,s.jsx)("div",{className:"mt-6 pt-4 border-t border-gray-200 flex justify-end",children:(0,s.jsxs)("button",{onClick:()=>A(x.id),className:"flex items-center text-red-600 hover:text-red-700",children:[(0,s.jsx)(o.A,{size:16,className:"mr-1"})," Delete Message"]})})]}):(0,s.jsx)("div",{className:"p-6 text-center text-gray-500",children:"Select a message to view its contents"})})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[4612,3963,9685,9411,7358],()=>t(1641)),_N_E=e.O()}]);